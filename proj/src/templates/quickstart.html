<!DOCTYPE html>

<head>
    <title>test</title>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <style>
        #map { 
            height: 360px;
        }
        .grid { margin:1em auto; border-collapse:collapse }
        .grid td {
            cursor:pointer;
            width:30px; height:30px;
            border:1px solid #ccc;
            text-align:center;
            font-family:sans-serif; font-size:13px
        }
        .grid td.clicked {
            background-color:yellow;
            font-weight:bold; color:red;
        }
    </style>
    <script>
    function clickableGrid( rows, cols, callback ){
      var i=0;
      var grid = document.createElement('table');
      grid.className = 'grid';
      for (var r=0;r<rows;++r){
        var tr = grid.appendChild(document.createElement('tr'));
        for (var c=0;c<cols;++c){
          var cell = tr.appendChild(document.createElement('td'));
          cell.className = "cell"
          cell.id = r.toString().concat("_", c.toString())
          cell.innerHTML = ++i;
          cell.addEventListener('click',(function(el,r,c,i){
            return function(){ callback(el,r,c,i); }
           })(cell,r,c,i),false);
        }
      }
      return grid;
    }
    </script>
</head>
<body>
    <div id="map"></div>
    <script>
        var map = L.map('map').setView([51.505, -0.09], 13);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
            maxZoom: 18,
            // id: 'cjrh.bbcd18d4',
            id: 'mapbox.dark',
            accessToken: 'pk.eyJ1IjoiY2pyaCIsImEiOiJDcEhBLS1VIn0.0if7MOAtSb23XP_-1h9VjQ'
        }).addTo(map);
        var polygon = L.polygon([
            [51.509, -0.08],
            [51.503, -0.06],
            [51.51, -0.047],
            [51.509, -0.047]
        ]).addTo(map);
        var bounds = [[54.559322, -5.767822], [56.1210604, -3.021240]];
        window.myrect = L.rectangle(bounds, {color: "#ff7800", weight: 1}).addTo(map);
        map.fitBounds(bounds);
    
        var lastClicked;
        var grid = clickableGrid(10,10,function(el,row,col,i){
            console.log("You clicked on element:",el);
            console.log("You clicked on row:",row);
            console.log("You clicked on col:",col);
            console.log("You clicked on item #:",i);

            el.className='clicked';
            if (lastClicked) lastClicked.className='';
            lastClicked = el;
        });
        document.body.appendChild(grid);
        $('<p />', {id:'output'}).text("blah").appendTo(document.body);
    </script>
    <script>
    function fcc() {
        window.myrect.setStyle({
            fillColor: '#ff0000'
        })
    }
    </script>
    <button onclick="fcc()">Change rect color</button>
    <script>
        var colors = ["red", "blue", "yellow", "black", "green"];
        function randcolor() {
            return colors[Math.floor(Math.random() * colors.length)];
        }

        $(".cell").hover(
        function () {
            console.log(this.id);
            $("#output").text(this.id);
            this.style.backgroundColor = randcolor();
        })
    </script>
    <HR />
    <p>
    <label for="amount">Donation amount ($50 increments):</label>
    <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
    </p>
     
    <div id="slider"></div>
      <script>
      $(function() {
        $( "#slider" ).slider({
          value:100,
          min: 0,
          max: 500,
          step: 50,
          slide: function( event, ui ) {
            $( "#amount" ).val( "$" + ui.value );
            $("td").each(function () {
                this.style.backgroundColor = randcolor();
            });
          }
        });
        $( "#amount" ).val( "$" + $( "#slider" ).slider( "value" ) );
      });
      </script>
</body>
